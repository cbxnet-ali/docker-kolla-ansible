---
- name: Install python version2
  hosts: all
  gather_facts: no

  tasks:
  - name: Install python version2
    raw: test -e /usr/bin/python || (test -e /usr/bin/apt && (apt -y update && apt install -y python-minimal))
    register: result
    changed_when: result.rc != 0
    become: true

- name: Playbook for preparations
  hosts: all

  vars:
    docker_user: ubuntu
    docker_experimental: "true"

  roles:
    - role: osism.docker

  tasks:
    - name: Install required packages
      package:
        name: "{{ item }}"
        state: present
      become: true
      with_items:
        - git
        - python-pip
        - python-virtualenv
